<th:block th:fragment="comments">

    <div class="comments-container">
<!--        <div th:if="${!comments.isEmpty()}" class="comments-header-text">Comments</div>-->

        <div sec:authorize="isAuthenticated()" th:id="'add-comment-box'+${post.id}" hidden>
            <form th:method="post" th:action="@{/{postId}/comment/add(postId=${post.id})}">
                <div class="input-group mb-3">
                    <input th:name="commentContent" type="text" class="form-control"
                           placeholder="Add Comment">
                    <input th:name="groupId" th:value="${post.group.id}" hidden>
                    <div class="input-group-append">
                        <button class="btn btn-outline-secondary" type="submit">Add Comment</button>
                    </div>
                </div>
            </form>
        </div>

        <ul class="list-group" th:each="comment : ${comments}" th:if="${!comments.isEmpty()}">
            <li th:if="${comment.post.id == post.id}" class="list-group-item comment-box">
                <div class="comment-text">
                    <a th:href="@{/profile/{username}(username=${comment.commenter.username})}">
                        <span th:text="${comment.commenter}"></span>
                    </a>
                    <span th:text="${comment.content}"></span>
                    <span class="comment-days-ago-info" th:text="${comment.commentDateToString()}"></span>
                </div>

                <div sec:authorize="isAuthenticated()" th:if="${comment.commenter.id == loggedInUser.id}">
                    <button th:id="'edit-comment-button'+${comment.id}" onclick="showEditCommentForm(event)"
                            class="btn btn-warning">Edit
                    </button>
                    <form hidden th:id="'edit-comment-form'+${comment.id}" th:action="@{/comment/edit}"
                          th:method="post">
                        <input th:name="commentId" th:value="${comment.id}" hidden>
                        <input th:name="commentContent" type="text">
                        <button type="button" th:id="'cancel-edit-comment-button'+${comment.id}"
                                onclick="hideEditCommentForm(event)" class="btn btn-warning">Cancel
                        </button>
                        <button type="submit" class="btn btn-primary">Save</button>
                    </form>
                    <form th:action="@{/comment/delete}" th:method="post">
                        <input th:name="commentId" th:value="${comment.id}" hidden>
                        <button type="submit" class="btn btn-danger">Delete</button>
                    </form>
                </div>
            </li>
        </ul>

    </div>

</th:block>