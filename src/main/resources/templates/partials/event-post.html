<th:block th:fragment="event-post">

    <div class="individual-card-posts list-group-item list-group-item-action">
        <div th:id="'post-content'+${post.id}">
            <div class="d-flex w-100 justify-content-between post-item">
                <div class="posted-by-info">
                    <img class="user-photo" th:src="${post.user.profilePhotoUrl}">
                    <div class="user-post-info post-info-font">
                        <a th:href="@{'/profile/' + ${post.user.username}}" th:text="${post.user}"></a>
                        <span> posted in </span>
                        <a th:href="@{'/group/' + ${post.group.id}}" th:text="${post.group.name}"></a>
                    </div>
                </div>
                <div class="days-ago-info">
                    <div sec:authorize="isAuthenticated()">
                        <div th:if="${loggedInUser.getId() == post.user.id}">
                            <div class="dropdown">
                                <button class="btn btn-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                                    <i class="bi bi-three-dots"></i>
                                </button>
                                <div class="dropdown-menu">
                                    <button type="button" onclick="editPost(event)" th:id="'edit-button'+${post.id}"
                                            class="btn btn-warning">
                                        Edit
                                    </button>
                                    <form th:method="post" th:action="@{/post/delete}">
                                        <input th:name="id" class="mb-1" th:value="${post.id}" hidden>
                                        <input th:name="groupId" th:value="${post.group.id}" hidden>
                                        <button type="submit" th:id="'delete-button'+${post.id}"
                                                class="btn btn-danger">
                                            Delete
                                        </button>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                    <span th:text="${post.postDateToString()}"></span>
                </div>
            </div>
            <p class="post-header"><span th:text="${post.header}"></span></p>
            <p class="post-details">
                <span th:text="${#temporals.month(post.eventDate)}"></span> /
                <span th:text="${#temporals.day(post.eventDate)}"></span> /
                <span th:text="${#temporals.year(post.eventDate)}"></span>
            </p>
            <div>
                <div sec:authorize="isAuthenticated()">
                    <a class="post-details" th:href="@{/post/event/{id}(id=${post.id})}">view event details</a>
                </div>
                <div sec:authorize="!isAuthenticated()">
                    <p class="post-details">Location: <span th:text="${post.eventAddress}"></span></p>
                </div>
            </div>
            <p class="post-details"><span th:text="${post.body}"></span></p>
        </div>

        <div sec:authorize="isAuthenticated()">

            <form method="post" th:id="'hidden-form'+${post.id}" th:action="@{/post/event/edit}" hidden>
                <div class="d-flex w-100 justify-content-between post-item">
                    <input th:name="header" class="mb-1" th:value="${post.header}">
                    <small th:text="${post.postDateToString()}"></small>
                </div>
                <input th:name="eventDate" class="mb-1" th:value="${post.eventDate}"><br>
                <input th:name="eventAddress" class="mb-1" th:value="${post.eventAddress}"><br>
                <input th:name="body" class="mb-1" th:value="${post.body}">
                <br>
                <small><span th:text="${post.user}"></span></small>

                <input th:name="id" class="mb-1" th:value="${post.id}" hidden>


                <div th:if="${loggedInUser.getId() == post.user.id}">
                    <button type="button" onclick="cancelEditingPost(event)" th:id="'cancel-button'+${post.id}"
                            class="btn btn-secondary">Cancel
                    </button>

                    <button type="submit" th:id="'save-button'+${post.id}"
                            class="btn btn-success search-location-btn">Save
                    </button>
                </div>
            </form>
        </div>

        <div class="comments-container">
            <th:block th:insert="~{partials/comments :: comments}"></th:block>
        </div>

    </div>

</th:block>